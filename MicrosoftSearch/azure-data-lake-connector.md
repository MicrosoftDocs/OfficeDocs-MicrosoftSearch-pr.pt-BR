---
title: Azure data Lake Connector para Microsoft Search
ms.author: monaray
author: monaray97
manager: shohara
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Configurar o conector do Gen2 de armazenamento do Azure data Lake para o Microsoft Search
ms.openlocfilehash: 01fea60e91af5ba321ceb00578ea2b0745c9c394
ms.sourcegitcommit: be0c64845477127d73ee24dc727e4583ced3d0e6
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/22/2020
ms.locfileid: "48206928"
---
# <a name="azure-data-lake-storage-gen2-connector"></a><span data-ttu-id="6cc0a-103">Conector Gen2 de armazenamento do Azure data Lake</span><span class="sxs-lookup"><span data-stu-id="6cc0a-103">Azure Data Lake Storage Gen2 connector</span></span>

<span data-ttu-id="6cc0a-104">Com o conector Gen2 de armazenamento do Azure data Lake, os usuários em sua organização podem pesquisar arquivos armazenados no [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) e nas contas de [armazenamento do Azure data Lake Gen 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) .</span><span class="sxs-lookup"><span data-stu-id="6cc0a-104">With the Azure Data Lake Storage Gen2 connector, users in your organization can search for files stored in [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) accounts.</span></span>

<span data-ttu-id="6cc0a-105">Este artigo é para os administradores do [Microsoft 365](https://www.microsoft.com/microsoft-365) ou qualquer pessoa que configure, execute e monitore um conector de Gen2 de armazenamento do Azure data Lake.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-105">This article is for [Microsoft 365](https://www.microsoft.com/microsoft-365) administrators or anyone who configures, runs, and monitors an Azure Data Lake Storage Gen2 connector.</span></span> <span data-ttu-id="6cc0a-106">Ele oferece uma visão geral da configuração do conector, recursos, limitações e técnicas de solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-106">It gives an overview of the connector configuration, capabilities, limitations, and troubleshooting techniques.</span></span> <span data-ttu-id="6cc0a-107">No artigo, usamos o *armazenamento do Azure* como um termo genérico para o [armazenamento de blob do Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) e o [armazenamento do Azure data Lake Gen 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span><span class="sxs-lookup"><span data-stu-id="6cc0a-107">In the article, we use *Azure Storage* as a generic term for [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span></span>

## <a name="connect-to-a-data-source"></a><span data-ttu-id="6cc0a-108">Conectar-se a uma fonte de dados</span><span class="sxs-lookup"><span data-stu-id="6cc0a-108">Connect to a data source</span></span>
### <a name="primary-storage-connection-string"></a><span data-ttu-id="6cc0a-109">Cadeia de conexão de armazenamento principal</span><span class="sxs-lookup"><span data-stu-id="6cc0a-109">Primary storage connection string</span></span> 
<span data-ttu-id="6cc0a-110">Na tela **autenticação e configuração** , forneça a cadeia de conexão de armazenamento principal.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-110">On the **Authentication and config** screen, provide the Primary Storage Connection String.</span></span> <span data-ttu-id="6cc0a-111">Essa cadeia de caracteres é necessária para permitir o acesso à sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-111">That string is required to allow access to your storage account.</span></span> <span data-ttu-id="6cc0a-112">Para encontrar a cadeia de conexão, vá para o [portal do Azure](https://ms.portal.azure.com/#home) e navegue até a seção **chaves** da conta de armazenamento do Azure relevante.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-112">To find your connection string, go to the [Azure portal](https://ms.portal.azure.com/#home) and navigate to the **Keys** section of your relevant Azure Storage account.</span></span> <span data-ttu-id="6cc0a-113">Copie e cole a cadeia de conexão no campo apropriado na tela.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-113">Copy and paste the connection string in the appropriate field on the screen.</span></span>

<span data-ttu-id="6cc0a-114">Se você não preferir fornecer **AccountKey** (um parâmetro na cadeia de conexão de armazenamento principal), será necessário conceder acesso ao nosso serviço de conectores de gráfico para as seguintes funções.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-114">If you do not prefer to provide the **AccountKey** (a parameter in the primary storage connection string), you will need to grant access to our Graph Connectors Service for the following roles.</span></span> 
* <span data-ttu-id="6cc0a-115">Leitor de dados de blob de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6cc0a-115">Storage Blob Data Reader</span></span>
* <span data-ttu-id="6cc0a-116">Colaborador de dados da fila de armazenamento</span><span class="sxs-lookup"><span data-stu-id="6cc0a-116">Storage Queue Data Contributor</span></span>
* <span data-ttu-id="6cc0a-117">Delegante de blob de armazenamento (somente para armazenamento hierárquico)</span><span class="sxs-lookup"><span data-stu-id="6cc0a-117">Storage Blob Delegator (only for hierarchical storage)</span></span>

<span data-ttu-id="6cc0a-118">Navegue até a guia **controle de acesso** de sua conta de armazenamento do Azure e siga as instruções para conceder acesso ao seguinte aplicativo:</span><span class="sxs-lookup"><span data-stu-id="6cc0a-118">Navigate to the **Access Control** tab of your Azure Storage account, and follow the instructions there to grant access to the following app:</span></span>
* <span data-ttu-id="6cc0a-119">**ID do aplicativo de terceiros:** 56c1da01-2129-48f7-9355-af6d59d42766</span><span class="sxs-lookup"><span data-stu-id="6cc0a-119">**First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766</span></span>
* <span data-ttu-id="6cc0a-120">**Nome do aplicativo de parte inicial:** Serviço do conector do Graph</span><span class="sxs-lookup"><span data-stu-id="6cc0a-120">**First Party App Name:** Graph Connector Service</span></span>

### <a name="storage-account-and-queue-notifications-optional"></a><span data-ttu-id="6cc0a-121">Notificações de conta e fila de armazenamento (opcional)</span><span class="sxs-lookup"><span data-stu-id="6cc0a-121">Storage account and queue notifications (Optional)</span></span>
<span data-ttu-id="6cc0a-122">O suporte para processar alterações em tempo real no serviço de conectores do Graph pode ser adicionado no futuro.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-122">Support to process changes in real time in the Graph Connectors Service might be added in the future.</span></span> <span data-ttu-id="6cc0a-123">Nesse caso, monitoraremos as notificações de alteração de armazenamento do Azure armazenadas em uma fila.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-123">In that case, we'll monitor Azure Storage change notifications stored in a queue.</span></span> <span data-ttu-id="6cc0a-124">Você precisará criar uma fila na mesma conta que sua conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-124">You'll need to create a queue in the same account as your Azure Storage account.</span></span>

<span data-ttu-id="6cc0a-125">Depois de criar uma fila, vá para a guia **eventos** na página fila para configurar a **assinatura do evento**.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-125">After you create a queue, go to the **Events** tab on the queue page to configure **Event Subscription**.</span></span> <span data-ttu-id="6cc0a-126">Escolha todos os eventos BLOB que a fila receberá e conecte a fila à conta de armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-126">Choose all the Blob events that the queue will receive, and connect the queue to the Azure Storage account.</span></span>

## <a name="manage-the-search-schema"></a><span data-ttu-id="6cc0a-127">Gerenciar o esquema de pesquisa</span><span class="sxs-lookup"><span data-stu-id="6cc0a-127">Manage the search schema</span></span>
<span data-ttu-id="6cc0a-128">Na tela **gerenciar esquema** , você tem a opção de alterar os atributos de esquema (**consultável**, **pesquisável**e **recuperável**) associados às propriedades gerenciadas.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-128">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, and **retrievable**) associated with the managed properties.</span></span> <span data-ttu-id="6cc0a-129">Esses atributos de propriedade gerenciada são dados indexados de sua conta de armazenamento de dados do Azure.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-129">These managed property attributes are data indexed from your Azure Data Storage account.</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="6cc0a-130">Gerenciar permissões de pesquisa</span><span class="sxs-lookup"><span data-stu-id="6cc0a-130">Manage search permissions</span></span>
### <a name="azure-data-lake-gen-2"></a><span data-ttu-id="6cc0a-131">Azure data Lake Gen 2</span><span class="sxs-lookup"><span data-stu-id="6cc0a-131">Azure Data Lake Gen 2</span></span>
<span data-ttu-id="6cc0a-132">Na tela **gerenciar permissões de pesquisa** , você pode optar por absorver as listas de controle de acesso (ACLs) da conta de [armazenamento do Azure data Lake Gen 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) .</span><span class="sxs-lookup"><span data-stu-id="6cc0a-132">On the **Manage search permissions** screen, you can choose to ingest the Access Control Lists (ACLs) from your [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) account.</span></span> <span data-ttu-id="6cc0a-133">Quando essas permissões de pesquisa são definidas, o conteúdo da pesquisa é cortado com base nas permissões atribuídas ao usuário conectado do [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) que está pesquisando o conteúdo.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-133">When these search permissions are set, search content is trimmed based on the permissions assigned to the signed-in [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) user searching the content.</span></span> <span data-ttu-id="6cc0a-134">Como alternativa, você pode escolher tornar todo o conteúdo indexado da conta de armazenamento visível para todos em sua organização.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-134">Alternatively, you can choose to make all the content indexed from your storage account visible to everyone in your organization.</span></span> <span data-ttu-id="6cc0a-135">Nesse caso, todos em sua organização terão acesso a todos os dados em sua conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-135">In this case, everyone in your organization will have access to all the data in your storage account.</span></span>

### <a name="azure-blob-storage"></a><span data-ttu-id="6cc0a-136">Armazenamento de Blob do Azure</span><span class="sxs-lookup"><span data-stu-id="6cc0a-136">Azure Blob Storage</span></span>
<span data-ttu-id="6cc0a-137">Para uma conexão com o [armazenamento de blob do Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), todo o conteúdo indexado da fonte configurada é visível para todos em sua organização.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-137">For a connection to [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), all the content indexed from the configured source is visible to everyone in your organization.</span></span> <span data-ttu-id="6cc0a-138">Não há suporte para listas de controle de acesso em nível de blob no armazenamento de blob do Azure.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-138">Access control lists are not supported at Blob level in Azure Blob Storage.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="6cc0a-139">Definir o agendamento de atualização</span><span class="sxs-lookup"><span data-stu-id="6cc0a-139">Set the refresh schedule</span></span>
<span data-ttu-id="6cc0a-140">Na tela **configurações de atualização** , você pode definir o intervalo de rastreamento incremental e o intervalo de rastreamento completo.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-140">On the **Refresh Settings** screen, you can set the incremental crawl interval and the full crawl interval.</span></span> <span data-ttu-id="6cc0a-141">Os intervalos padrão para o conector do Gen2 de armazenamento do Azure data Lake são 15 minutos para um rastreamento incremental e uma semana para um rastreamento completo.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-141">The default intervals for the Azure Data Lake Storage Gen2 connector are 15 minutes for an incremental crawl and one week for a full crawl.</span></span>

## <a name="limitations"></a><span data-ttu-id="6cc0a-142">Limitações</span><span class="sxs-lookup"><span data-stu-id="6cc0a-142">Limitations</span></span>
<span data-ttu-id="6cc0a-143">Uma conexão publicada para o armazenamento de blob do Azure não pode ser reconfigurada para a fonte Gen2 de armazenamento do Azure data Lake e vice-versa.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-143">A published connection for Azure Blob Storage cannot be reconfigured for Azure Data Lake Storage Gen2 source and vice-versa.</span></span> <span data-ttu-id="6cc0a-144">Nesses cenários, é recomendável configurar uma nova conexão.</span><span class="sxs-lookup"><span data-stu-id="6cc0a-144">In such scenarios, it is recommended to configure a new connection.</span></span>
